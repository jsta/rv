<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate predictions from models — rvpredict • rv</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate predictions from models — rvpredict"><meta property="og:description" content="Performs predictions (in the form of rv objects) from models based on
given covariates."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/rv-doc.html">rv: a simulation-based random variable class</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jsta/rv/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate predictions from models</h1>
    <small class="dont-index">Source: <a href="https://github.com/jsta/rv/blob/HEAD/R/rvpredict.R" class="external-link"><code>R/rvpredict.R</code></a></small>
    <div class="hidden name"><code>rvpredict.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Performs predictions (in the form of <code>rv</code> objects) from models based on
given covariates.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">rvpredict</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for lm</span>
<span class="fu">rvpredict</span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>An object representing a statistical model fit.</p></dd>
<dt>...</dt>
<dd><p>Arguments passed to and from other methods.</p></dd>
<dt>newdata</dt>
<dd><p>A data frame with new covariates to be used in the
predictions. The column names of the data frame must match those in the
model matrix (although order may be arbitrary).  If omitted, the model
matrix is used instead; the resulting predictions are then the
<em>replications</em> of the data. <em>Note:</em> this can be an <code>rv</code>
object to incorporate extra uncertainty into predictions.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>For the <code>lm</code> method, a vector as long as there are rows in the
data frame <code>newdata</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>lm</code> method generates predictions of the outcome variable.  The
posterior coefficient estimates (the "intercept" and the "betas") are
estimated in a Bayesian framework by <code>posterior(object)</code>; the
coefficients are multiplied by <code>newdata</code> (if omitted, the model
covariate matrix is used instead) to obtain the predicted model mean;
lastly, the outcomes are predicted from the Normal sampling model, taking
into account the sampling variability along with the uncertainty in the
estimation of the standard deviation (`sigma').</p>
<p>The covariate matrix <code>newdata</code> can be an <code>rv</code>, representing
additional uncertainty in the covariates.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>J Kerman</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in">  <span class="co">## Create some fake data</span></span>
<span class="r-in">  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span class="r-in">  <span class="co">## Some covariates</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean<span class="op">=</span><span class="fl">0</span><span class="op">)</span>, x2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">10</span><span class="op">)</span> <span class="op">-</span> <span class="fl">10</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">y.mean</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1.0</span> <span class="op">+</span> <span class="fl">2.0</span> <span class="op">*</span> <span class="va">X</span><span class="op">$</span><span class="va">x1</span> <span class="op">+</span> <span class="fl">3.0</span> <span class="op">*</span> <span class="va">X</span><span class="op">$</span><span class="va">x2</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">y.mean</span>, sd<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span> <span class="co">## n random numbers</span></span>
<span class="r-in">  <span class="va">D</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">y</span><span class="op">)</span>, <span class="va">X</span><span class="op">)</span></span>
<span class="r-in">  <span class="co">## Regression model fit</span></span>
<span class="r-in">  <span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, data<span class="op">=</span><span class="va">D</span><span class="op">)</span></span>
<span class="r-in">  <span class="co">## Bayesian estimates</span></span>
<span class="r-in">  <span class="fu"><a href="posterior.html">posterior</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $beta</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            name mean   sd    1%  2.5%  25%  50% 75% 97.5% 99% sims</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] (Intercept) 0.88 0.57 -0.53 -0.29 0.55 0.88 1.2   2.0 2.3 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2]          x1 2.88 0.97  0.74  1.10 2.27 2.87 3.4   4.8 5.5 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3]          x2 3.24 0.22  2.64  2.80 3.11 3.23 3.4   3.7 3.8 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sigma</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     mean   sd   1% 2.5% 25% 50% 75% 97.5% 99% sims</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1.7 0.61 0.95    1 1.3 1.6   2   3.2 3.7 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in">  <span class="co">## Replications</span></span>
<span class="r-in">  <span class="va">y.rep</span> <span class="op">&lt;-</span> <span class="fu">rvpredict</span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span>
<span class="r-in">  <span class="co">## Predictions at the mean of the covariates</span></span>
<span class="r-in">  <span class="va">X.pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">X</span><span class="op">$</span><span class="va">x1</span><span class="op">)</span>, x2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">X</span><span class="op">$</span><span class="va">x2</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">y.pred</span> <span class="op">&lt;-</span> <span class="fu">rvpredict</span><span class="op">(</span><span class="va">obj</span>, newdata<span class="op">=</span><span class="va">X.pred</span><span class="op">)</span></span>
<span class="r-in">  <span class="co">## Plot predictions</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">y.rep</span>, <span class="va">D</span><span class="op">$</span><span class="va">x1</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">D</span><span class="op">$</span><span class="va">y</span>, <span class="va">D</span><span class="op">$</span><span class="va">x1</span>, col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span></span>
<span class="r-plt img"><img src="rvpredict-1.png" alt="" width="700" height="433"></span>
<span class="r-in">  <span class="co">## 'Perturb' (add uncertainty to) covariate x1</span></span>
<span class="r-in">  <span class="va">X.pred2</span> <span class="op">&lt;-</span> <span class="va">X</span></span>
<span class="r-in">  <span class="va">X.pred2</span><span class="op">$</span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">n</span>, mean<span class="op">=</span><span class="va">X.pred2</span><span class="op">$</span><span class="va">x1</span>, sd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">X.pred2</span><span class="op">$</span><span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">y.pred2</span> <span class="op">&lt;-</span> <span class="fu">rvpredict</span><span class="op">(</span><span class="va">obj</span>, newdata<span class="op">=</span><span class="va">X.pred2</span><span class="op">)</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jouni Kerman, Jemma Stachelek.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>


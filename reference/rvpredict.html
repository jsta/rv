<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate predictions from models — rvpredict • rv</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate predictions from models — rvpredict" />
<meta property="og:description" content="Performs predictions (in the form of rv objects) from models based on
given covariates." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rv-doc.html">rv: a simulation-based random variable class</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jsta/rv/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate predictions from models</h1>
    <small class="dont-index">Source: <a href='https://github.com/jsta/rv/blob/master/R/rvpredict.R'><code>R/rvpredict.R</code></a></small>
    <div class="hidden name"><code>rvpredict.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Performs predictions (in the form of <code>rv</code> objects) from models based on
given covariates.</p>
    </div>

    <pre class="usage"><span class='fu'>rvpredict</span>(<span class='no'>object</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>rvpredict</span>(<span class='no'>object</span>, <span class='no'>newdata</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object representing a statistical model fit.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to and from other methods.</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>A data frame with new covariates to be used in the
predictions. The column names of the data frame must match those in the
model matrix (although order may be arbitrary).  If omitted, the model
matrix is used instead; the resulting predictions are then the
<em>replications</em> of the data. <em>Note:</em> this can be an <code>rv</code>
object to incorporate extra uncertainty into predictions.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For the <code>lm</code> method, a vector as long as there are rows in the
data frame <code>newdata</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>lm</code> method generates predictions of the outcome variable.  The
posterior coefficient estimates (the "intercept" and the "betas") are
estimated in a Bayesian framework by <code><a href='posterior.html'>posterior(object)</a></code>; the
coefficients are multiplied by <code>newdata</code> (if omitted, the model
covariate matrix is used instead) to obtain the predicted model mean;
lastly, the outcomes are predicted from the Normal sampling model, taking
into account the sampling variability along with the uncertainty in the
estimation of the standard deviation (`sigma').</p>
<p>The covariate matrix <code>newdata</code> can be an <code>rv</code>, representing
additional uncertainty in the covariates.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
  <span class='co'>## Create some fake data</span>
  <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>10</span>
  <span class='co'>## Some covariates</span>
  <span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>1</span>)
  <span class='no'>X</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x1</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>, <span class='kw'>mean</span><span class='kw'>=</span><span class='fl'>0</span>), <span class='kw'>x2</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span>(<span class='no'>n</span>, <span class='fl'>10</span>) - <span class='fl'>10</span>)
  <span class='no'>y.mean</span> <span class='kw'>&lt;-</span> (<span class='fl'>1.0</span> + <span class='fl'>2.0</span> * <span class='no'>X</span>$<span class='no'>x1</span> + <span class='fl'>3.0</span> * <span class='no'>X</span>$<span class='no'>x2</span>)
  <span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>, <span class='no'>y.mean</span>, <span class='kw'>sd</span><span class='kw'>=</span><span class='fl'>1.5</span>) <span class='co'>## n random numbers</span>
  <span class='no'>D</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>y</span><span class='kw'>=</span><span class='no'>y</span>), <span class='no'>X</span>)
  <span class='co'>## Regression model fit</span>
  <span class='no'>obj</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>y</span> ~ <span class='no'>x1</span> + <span class='no'>x2</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>D</span>)
  <span class='co'>## Bayesian estimates</span>
  <span class='fu'><a href='posterior.html'>posterior</a></span>(<span class='no'>obj</span>)</div><div class='output co'>#&gt; $beta
#&gt;            name mean   sd    1%  2.5%  25%  50% 75% 97.5% 99% sims
#&gt; [1] (Intercept) 0.88 0.57 -0.53 -0.29 0.55 0.88 1.2   2.0 2.3 1000
#&gt; [2]          x1 2.88 0.97  0.74  1.10 2.27 2.87 3.4   4.8 5.5 1000
#&gt; [3]          x2 3.24 0.22  2.64  2.80 3.11 3.23 3.4   3.7 3.8 1000
#&gt; 
#&gt; $sigma
#&gt;     mean   sd   1% 2.5% 25% 50% 75% 97.5% 99% sims
#&gt; [1]  1.7 0.61 0.95    1 1.3 1.6   2   3.2 3.7 1000
#&gt; </div><div class='input'>  <span class='co'>## Replications</span>
  <span class='no'>y.rep</span> <span class='kw'>&lt;-</span> <span class='fu'>rvpredict</span>(<span class='no'>obj</span>)
  <span class='co'>## Predictions at the mean of the covariates</span>
  <span class='no'>X.pred</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x1</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>X</span>$<span class='no'>x1</span>), <span class='kw'>x2</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>X</span>$<span class='no'>x2</span>))
  <span class='no'>y.pred</span> <span class='kw'>&lt;-</span> <span class='fu'>rvpredict</span>(<span class='no'>obj</span>, <span class='kw'>newdata</span><span class='kw'>=</span><span class='no'>X.pred</span>)
  <span class='co'>## Plot predictions</span>
  <span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>y.rep</span>, <span class='no'>D</span>$<span class='no'>x1</span>)</div><div class='input'>  <span class='fu'><a href='https://rdrr.io/r/graphics/points.html'>points</a></span>(<span class='no'>D</span>$<span class='no'>y</span>, <span class='no'>D</span>$<span class='no'>x1</span>, <span class='kw'>col</span><span class='kw'>=</span><span class='st'>"red"</span>)</div><div class='img'><img src='rvpredict-1.png' alt='' width='700' height='433' /></div><div class='input'>  <span class='co'>## 'Perturb' (add uncertainty to) covariate x1</span>
  <span class='no'>X.pred2</span> <span class='kw'>&lt;-</span> <span class='no'>X</span>
  <span class='no'>X.pred2</span>$<span class='no'>x1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='kw'>n</span><span class='kw'>=</span><span class='no'>n</span>, <span class='kw'>mean</span><span class='kw'>=</span><span class='no'>X.pred2</span>$<span class='no'>x1</span>, <span class='kw'>sd</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span>(<span class='no'>X.pred2</span>$<span class='no'>x1</span>))
  <span class='no'>y.pred2</span> <span class='kw'>&lt;-</span> <span class='fu'>rvpredict</span>(<span class='no'>obj</span>, <span class='kw'>newdata</span><span class='kw'>=</span><span class='no'>X.pred2</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jouni Kerman, Joseph Stachelek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


